
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  
    <title>搬瓦工VPS架设VPN教程 | hjhjw1991&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="hjhjw1991">
    

    
    <meta name="description" content="从CSDN个人博客上把这篇文章搬过来了,原文已被消失">
<meta name="keywords" content="vpn,vps,guide">
<meta property="og:type" content="article">
<meta property="og:title" content="搬瓦工VPS架设VPN教程">
<meta property="og:url" content="https://hjhjw1991.github.io/blog/2015/05/19/搬瓦工VPS架设VPN教程/index.html">
<meta property="og:site_name" content="hjhjw1991&#39;s blog">
<meta property="og:description" content="从CSDN个人博客上把这篇文章搬过来了,原文已被消失">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://images.cnitblog.com/blog/264055/201501/121015062612422.jpg">
<meta property="og:image" content="http://images.cnitblog.com/blog/264055/201412/161447160622461.jpg">
<meta property="og:image" content="http://img.blog.csdn.net/20150610114113600">
<meta property="og:image" content="https://hjhjw1991.github.io/images/blogs/bandwagon-affliate.png">
<meta property="og:updated_time" content="2019-03-24T02:39:27.588Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="搬瓦工VPS架设VPN教程">
<meta name="twitter:description" content="从CSDN个人博客上把这篇文章搬过来了,原文已被消失">
<meta name="twitter:image" content="http://images.cnitblog.com/blog/264055/201501/121015062612422.jpg">

    
    <link rel="alternative" href="/atom.xml" title="hjhjw1991&#39;s blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/author.png">
    <link rel="apple-touch-icon-precomposed" href="/img/author.png">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="hjhjw1991&#39;s blog" title="hjhjw1991&#39;s blog"></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="hjhjw1991&#39;s blog">hjhjw1991&#39;s blog</a></h1>
				<h2 class="blog-motto">Coder, Learn</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value="8741923514077570040"><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</ul></nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/blog/2015/05/19/搬瓦工VPS架设VPN教程/" title="搬瓦工VPS架设VPN教程" itemprop="url">搬瓦工VPS架设VPN教程</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="hjhjw1991" target="_blank" itemprop="author">hjhjw1991</a>
		
  </p><p class="article-time">
    <time datetime="2015-05-18T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-05-19</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-前言"><span class="toc-number">1.</span> <span class="toc-text">0. 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-安装系统"><span class="toc-number">2.</span> <span class="toc-text">1. 安装系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-安装服务（VPN-PPTP）"><span class="toc-number">3.</span> <span class="toc-text">2. 安装服务（VPN-PPTP）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-登陆系统"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 登陆系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-安装PPTP服务"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 安装PPTP服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-添加自己的VPN账号"><span class="toc-number">4.</span> <span class="toc-text">3. 添加自己的VPN账号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-reference"><span class="toc-number">5.</span> <span class="toc-text">4. reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Appendix"><span class="toc-number">6.</span> <span class="toc-text">5. Appendix</span></a></li></ol>
		
		</div>
		
		<blockquote>
<p>原文已被消失, 且本文内容不再有效, 也不打算再出新的教程或者更新维护本文, 望知悉.  </p>
</blockquote>
<p>从CSDN个人博客上把这篇文章搬过来了，一是给自己备忘，二是方便没有CSDN账户的人留言。可以直接点击<a href="http://blog.csdn.net/hjhjw1991/article/details/45848565" target="_blank" rel="noopener">访问原文</a>。以下是原文。  </p>
<hr>
<h2 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h2><p>有独立架设VPN用于科学上网的想法很久了，但由于种种惰性一直没有付诸实践，都是在勉强用GoAgent代理浏览器，或者修改hosts重定位IP。<br>用过这两种方式的人都知道，他们不太稳定。动了购买VPN的心思，然而几经比较后发现，综合考虑稳定性、流量，租用VPS可能更划算一些，毕竟VPN只能用于网络连接，而VPS还可以用于部署网络应用。做了一下前期调研，选择了搬瓦工的VPS，没有别的原因，就是便宜。<br>购买需注册Paypal, 好像现在也支持支付宝了。这不是广告。<br>VPS的购买可以自行搜索官网链接, 也可以点击<a href="https://bandwagonhost.com/aff.php?aff=8722" target="_blank" rel="noopener">我的推广链接</a>进去购买, 点我的推广链接你会有一定的优惠, 当然购买成功的话我也有一定的分成.<br>ps：虽然主要参考了<a href="http://www.cnblogs.com/zuike/articles/4167182.html" target="_blank" rel="noopener">这篇博文</a>，但其间也是踩了一些坑，都写在本文中了。<br>转载请注明出处。  </p>
<h2 id="1-安装系统"><a href="#1-安装系统" class="headerlink" title="1. 安装系统"></a>1. 安装系统</h2><p> 在注册购买好vps后，根据以下截图进入kiwivm管理面板：<br> <img src="http://images.cnitblog.com/blog/264055/201501/121015062612422.jpg" alt="kiwivm">  </p>
<p>面板上默认可能安装的系统是CentOS 6<br>如果不是，想安装系统，从下面进入<br><img src="http://images.cnitblog.com/blog/264055/201412/161447160622461.jpg" alt="os"><br>选择相应系统就行了。我采用的默认的CentOS 6系统。<br>由于一直是用ubuntu的，对centos的yum还不是很熟悉。之后会写一篇关于在centos6上升级python到2.7的教程，centos6的yum跟python2.6有深度绑定，所以无法直接升级，需要编译源代码来升级。而且安装setuptools也是有坑的。  </p>
<h2 id="2-安装服务（VPN-PPTP）"><a href="#2-安装服务（VPN-PPTP）" class="headerlink" title="2. 安装服务（VPN-PPTP）"></a>2. 安装服务（VPN-PPTP）</h2><h3 id="2-1-登陆系统"><a href="#2-1-登陆系统" class="headerlink" title="2.1 登陆系统"></a>2.1 登陆系统</h3><p>安装完系统后登录系统，如果你是Windows系统登录，可使用putty，xshell等登录VPS，也可以直接使用kiwivm管理界面的Root shell - interactive启动html5管理交互界面（无需输入密码）。<br>putty登陆方法：选择登陆方式为ssh登陆 ，IP地址和port填写你VPS的IP和port，点open即可。为方便以后登陆，可以起一个session名字并点击save保存配置。<br>putty登陆需要输入账号密码，默认账号是root，密码从以下界面产生<br><img src="http://img.blog.csdn.net/20150610114113600" alt="获得随机密码"></p>
<p>kiwivm管理界面随机产生root密码，这是出于安全考虑。为方便使用，可以以root登陆系统后增加用户，或者更改root的密码<br>更改密码的命令是：  </p>
<pre><code>passwd
</code></pre><p>按照提示输入两遍新密码即可。</p>
<h3 id="2-2-安装PPTP服务"><a href="#2-2-安装PPTP服务" class="headerlink" title="2.2 安装PPTP服务"></a>2.2 安装PPTP服务</h3><p>运行如下命令  </p>
<pre><code>wget http://www.5yun.org/Soft/linux/Openvz-vpn/openvps_vpn_centos-5-6.sh
chmod a+x openvps_vpn_centos-5-6.sh 
bash openvps_vpn_centos-5-6.sh  

#如果以上地址不可用，可尝试以下命令，
#这个脚本只提供三个选项，一般选择1就可以自动完成全部过程
#去掉注释符号
#wget http://www.hi-vps.com/shell/vpn_centos6.sh
#chmod a+x vpn_centos6.sh
#bash vpn_centos6.sh
</code></pre><p>上边第一步是获取一个自动脚本，第二步是给它运行权限，第三步是运行。有时候会遇到第一步无法成功，这时候在本地先下载这个文件，再使用Putty或者SSH客户端上传到VPS也是可以的。<br>执行以上命令后将会返回一个选择系统版本的提示信息，因为之前我们选择的是centos6 ，因此选择第2项，输入2，回车：</p>
<pre><code>please select your operation system
which do you want to?input the number.
1. my system is centos5 32bit(only support 32bit)
2. my system is centos6 32bit or 64bit(they are support)
3. repaire VPN service
4. add VPN user
</code></pre><p>执行命令后将自动安装，成功后返回一下信息:<br><code>VPN service is installed, your VPN username is vpn_name,VPN password is ********</code><br>这句话提示成功创建了一个名为<code>vpn_name</code>的账户，密码为 <code>******</code>。  </p>
<p>执行命令后报404错误，或者提示文件或目录不存在，是因为没能成功下载安装包。<br>这里提供手动下载安装包的方法<br>如果是centos6，执行以下命令：     </p>
<pre><code>wget http://linux.dell.com/dkms/permalink/dkms-2.0.17.5-1.noarch.rpm
wget https://acelnmp.googlecode.com/files/kernel_ppp_mppe-1.0.2-3dkms.noarch.rpm
wget https://qiaodahai.googlecode.com/files/pptpd-1.3.4-2.el6.i686.rpm
wget https://logdns.googlecode.com/files/ppp-2.4.5-17.0.rhel6.i686.rpm
</code></pre><p>如果是 centos5，则执行以下命令：</p>
<pre><code>wget http://linux.dell.com/dkms/permalink/dkms-2.0.17.5-1.noarch.rpm
wget https://acelnmp.googlecode.com/files/kernel_ppp_mppe-1.0.2-3dkms.noarch.rpm
wget https://acelnmp.googlecode.com/files/pptpd-1.3.4-1.rhel5.1.i386.rpm
wget https://fastlnmp.googlecode.com/files/ppp-2.4.4-9.0.rhel5.i386.rpm
</code></pre><h2 id="3-添加自己的VPN账号"><a href="#3-添加自己的VPN账号" class="headerlink" title="3. 添加自己的VPN账号"></a>3. 添加自己的VPN账号</h2><p>如何添加自己的vpn账户名？ 比如我想用 anonymous 这个帐号，密码设置为 abc@123 (<strong>注意，危险！仅作为演示用，千万别设置这样的密码！</strong>)  </p>
<p>执行下面这句代码来添加vpn账户：<br><code>bash openvps_vpn_centos-5-6.sh</code><br>返回的信息选项中，选择第4项：4.add VPN user<br>根据提示输入用户名，如 anonymous，再输入密码 即可完成vpn的架设了。<br>使用时，在本地新建VPN连接，地址和端口填写VPS的地址和端口，用户名密码填写自己设置的VPN的用户名和密码，然后连接，就可以了。<br>如有疑问，请留言讨论。</p>
<h2 id="4-reference"><a href="#4-reference" class="headerlink" title="4. reference"></a>4. reference</h2><p><a href="http://www.cnblogs.com/zuike/articles/4167182.html" target="_blank" rel="noopener">搬瓦工(bandwagonhost) 搭建VPN 2014.12月测试可行</a><br><a href="http://www.jjhr.net/2013/12/centos6-x-vpn-pptp-build-method/" target="_blank" rel="noopener">Centos6.X vpn pptp 搭建方法</a><br><a href="http://www.phpsong.com/1.html" target="_blank" rel="noopener">搬瓦工vps vpn架设</a>  </p>
<p>如果本文对你有帮助， 欢迎点击<a href="https://bandwagonhost.com/aff.php?aff=8722" target="_blank" rel="noopener">我的推广链接</a>注册购买vps， 赏我一杯咖啡。<br>推广链接二维码：<br><img src="/images/blogs/bandwagon-affliate.png" alt="bandwagon推广"></p>
<h2 id="5-Appendix"><a href="#5-Appendix" class="headerlink" title="5. Appendix"></a>5. Appendix</h2><p>最近妖风太盛，所以如果自己有能力的童鞋，请移步Github的这个项目<a href="https://github.com/cloudwu/mptun" target="_blank" rel="noopener">MPTUN</a>自己研究怎么搭建VPN吧，当然VPS还是必要的。  </p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/blog/">blog</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/vpn/">vpn</a><a href="/tags/vps/">vps</a><a href="/tags/guide/">guide</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://hjhjw1991.github.io/blog/2015/05/19/搬瓦工VPS架设VPN教程/" data-title="搬瓦工VPS架设VPN教程 | hjhjw1991&#39;s blog" data-tsina="1304671950" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev">
 <a href="/blog/2015/06/08/Python正则表达式/" title="Python正则表达式">
  <strong>上一篇：</strong><br>
  <span>
  Python正则表达式</span>
</a>
</div>


<div class="next">
<a href="/blog/2015/05/09/本博客出了一个bug-求助/" title="post更新的内容，页面只显示其中一部分[已解决]">
 <strong>下一篇：</strong><br> 
 <span>post更新的内容，页面只显示其中一部分[已解决]
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-前言"><span class="toc-number">1.</span> <span class="toc-text">0. 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-安装系统"><span class="toc-number">2.</span> <span class="toc-text">1. 安装系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-安装服务（VPN-PPTP）"><span class="toc-number">3.</span> <span class="toc-text">2. 安装服务（VPN-PPTP）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-登陆系统"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 登陆系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-安装PPTP服务"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 安装PPTP服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-添加自己的VPN账号"><span class="toc-number">4.</span> <span class="toc-text">3. 添加自己的VPN账号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-reference"><span class="toc-number">5.</span> <span class="toc-text">4. reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Appendix"><span class="toc-number">6.</span> <span class="toc-text">5. Appendix</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="hjhjw1991" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/android/" title="android">android<sup>26</sup></a></li>
		  
		
		  
			<li><a href="/categories/blog/" title="blog">blog<sup>15</sup></a></li>
		  
		
		  
			<li><a href="/categories/leetcode/" title="leetcode">leetcode<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/opinion/" title="opinion">opinion<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/tips/" title="tips">tips<sup>4</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/android/" title="android">android<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/guide/" title="guide">guide<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/interview/" title="interview">interview<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/windows/" title="windows">windows<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/jekyll/" title="jekyll">jekyll<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/vps/" title="vps">vps<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ssh/" title="ssh">ssh<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/vpn/" title="vpn">vpn<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/regex/" title="regex">regex<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/mac/" title="mac">mac<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/uwsgi/" title="uwsgi">uwsgi<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ios/" title="ios">ios<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://google.com" target="_blank" title="Google">Google</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.goldenfrog.com/vyprvpn/refer-a-friend/get-a-free-month?ar=8betlkaq2h638_1" target="_blank" title="VyprVPN">VyprVPN</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="120" class="share_self" frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1304671950&verifier=64e7ae81&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer">
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Huang Jun. <br>
			This is my blog.</p>
	</section>
	 
	<div class="social-font">
		
		<a href="http://weibo.com/1304671950" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/hjhjw1991" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:hjhjw1991@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019 
		
		<a href="/about" target="_blank" title="hjhjw1991">hjhjw1991</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'hjhjw1991';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cd0e561542c22cc83da2e311ec57da84";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
